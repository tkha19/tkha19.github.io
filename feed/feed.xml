<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title>Kha&#39;s - Journeys and times of me</title>
	<subtitle>This place is a note for myself</subtitle>
	
	<link href="https://lotusirous.github.io/feed/feed.xml" rel="self"/>
	<link href="https://lotusirous.github.io/"/>
	<updated>2021-10-17T00:00:00Z</updated>
	<id>https://lotusirous.github.io/</id>
	<author>
		<name>Your Name Here</name>
		<email>youremailaddress@example.com</email>
	</author>
	
	<entry>
		<title>Default flask session is insecure</title>
		<link href="https://lotusirous.github.io/posts/flask-session/"/>
		<updated>2021-10-17T00:00:00Z</updated>
		<id>https://lotusirous.github.io/posts/flask-session/</id>
		<content type="html">&lt;p&gt;Let&#39;s consider the following deadly simple flask application. The developer stores the secret information in the session key &lt;code&gt;admin_key&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; flask &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Flask&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; session&lt;br /&gt;&lt;br /&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Flask&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__name__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;route&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br /&gt;    session&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;admin_key&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;foo-bar&#39;&lt;/span&gt;&lt;br /&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;p&gt;Hello, World!&amp;lt;/p&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run it:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token assign-left variable&quot;&gt;FLASK_APP&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;app.py flask run&lt;br /&gt;&lt;br /&gt; * Serving Flask app &lt;span class=&quot;token string&quot;&gt;&#39;app.py&#39;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lazy loading&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br /&gt; * Environment: production&lt;br /&gt;   WARNING: This is a development server. Do not use it &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; a production deployment.&lt;br /&gt;   Use a production WSGI server instead.&lt;br /&gt; * Debug mode: off&lt;br /&gt; * Running on http://127.0.0.1:5000/ &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Press CTRL+C to quit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&#39;s parse the server response&lt;/p&gt;
&lt;pre class=&quot;language-txt&quot;&gt;&lt;code class=&quot;language-txt&quot;&gt;$ curl -ik -vvv http://localhost:5000&lt;br /&gt;&lt;br /&gt;*   Trying 127.0.0.1...&lt;br /&gt;* TCP_NODELAY set&lt;br /&gt;* Connected to localhost (127.0.0.1) port 5000 (#0)&lt;br /&gt;&gt; GET / HTTP/1.1&lt;br /&gt;&gt; Host: localhost:5000&lt;br /&gt;&gt; User-Agent: curl/7.64.1&lt;br /&gt;&gt; Accept: */*&lt;br /&gt;&gt;&lt;br /&gt;* HTTP 1.0, assume close after body&lt;br /&gt;&amp;lt; HTTP/1.0 200 OK&lt;br /&gt;HTTP/1.0 200 OK&lt;br /&gt;&amp;lt; Content-Type: text/html; charset=utf-8&lt;br /&gt;Content-Type: text/html; charset=utf-8&lt;br /&gt;&amp;lt; Content-Length: 11&lt;br /&gt;Content-Length: 11&lt;br /&gt;&amp;lt; Vary: Cookie&lt;br /&gt;Vary: Cookie&lt;br /&gt;&amp;lt; Set-Cookie: session=eyJhZG1pbl9rZXkiOiJmb28tYmFyIn0.YWv3oA.8ccU4eP_3rOH_zFuiemOieKIw40; HttpOnly; Path=/&lt;br /&gt;Set-Cookie: session=eyJhZG1pbl9rZXkiOiJmb28tYmFyIn0.YWv3oA.8ccU4eP_3rOH_zFuiemOieKIw40; HttpOnly; Path=/&lt;br /&gt;&amp;lt; Server: Werkzeug/2.0.1 Python/3.8.12&lt;br /&gt;Server: Werkzeug/2.0.1 Python/3.8.12&lt;br /&gt;&amp;lt; Date: Sun, 17 Oct 2021 10:14:56 GMT&lt;br /&gt;Date: Sun, 17 Oct 2021 10:14:56 GMT&lt;br /&gt;&lt;br /&gt;&amp;lt;&lt;br /&gt;* Closing connection 0&lt;br /&gt;Hello world&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;Set-Cookie&lt;/code&gt; value in HTTP header header is quite interesting for me because it&#39;s different from PHP or Java worlds (PHPSESSIONID or JSESSIONID). This value does not look like an id and it&#39;s similiar to a JWT token&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;eyJhZG1pbl9rZXkiOiJmb28tYmFyIn0.YWv3oA.8ccU4eP_3rOH_zFuiemOieKIw40&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&#39;s dive in how the session is implemented.&lt;/p&gt;
</content>
	</entry>
</feed>
